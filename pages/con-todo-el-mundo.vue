<!-- layout -->
<template>
  <div class="">

    <!-- üõ£ -->
    <AppNav/>

    <!-- üõå -->
    <div class="detail-cover-out"/>
    <div class="detail-cover-01"/>
    <div class="detail-cover-02"/>
    <div class="detail-cover-03"/>

    <!-- ü§ôüèº -->
    <main class="">
      <div class="detail-main mw">
        <header class="detail-header">

          <figure class="detail-figure">
            <div class="eyebrow">
              <nuxt-link class="home-link f-space op-0" to="/">Go Back</nuxt-link>
              <h3 class="f-mabry">4</h3>
            </div>
            <img src="@/assets/img/matt/04.jpg" alt="Khruangbin">
          </figure>

          <article class="detail-details">
            <h4 class="genre op-4 f-space">Alternative</h4>
            <h1 class="album f-mabry">Con Todo El Mundo</h1>
            <h3 class="artist f-space">Khruangbin</h3>
          </article>
        </header>

        <section class="mini-player">
          <iframe src="https://open.spotify.com/embed/track/5gYGXwHud7JFReP9W61wGt" width="100%" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
        </section>

        <article class="detail-copy">
          <p>On their second album, the Houston-based instrumental trio crafts a unique, psychedelic vibe that hangs between continents and eras.</p>

          <p>Khruangbin craft atmosphere music that never fades into the background, like some endless curl of smoke that keeps pluming upward. Sprinkled with snippets of spoken word, faint vocal melodies, and ranging and impeccably performed guitar solos, the whole of their second record, Con Todo El Mundo is, in effect, a long and pleasant head nod that seems to hang between continents and eras. The group‚Äîwhose name is a transliteration of the Thai word for ‚Äúairplane‚Äù‚Äîelicits the same eclectic enjoyment of any number of artists that came of age around the turn of the century, from the laid-back trip-hop feel of Kruder &amp; Dorfmeister to dub-jammy Thievery Corporation: Ethereal instrumental music that might be described as ‚Äúworld‚Äù as shorthand for its range of melody, rhythm, and overall vibe. But the Houston-based instrumental trio makes music that‚Äôs a little more dusty, frayed around the edges, and personal.</p>

          <div class="byline mt-2 tar">
            <h4>
              <a href="https://pitchfork.com/reviews/albums/khruangbin-con-todo-el-mundo/" target="_blank">‚ÄîPitchfork</a>
            </h4>
          </div>
        </article>
      </div>
    </main>

  </div>
</template>


<!-- style -->
<style lang="scss">
  @import '@/assets/mq.scss';

  .detail-cover-01, .detail-cover-02, .detail-cover-03 {
    position: fixed;
    top: 0; left: 0;
    z-index: var(--zmax);
    width: 100vw; height: 35vh;
    background: #28262a;
    transform: scaleX(1);
    transform-origin: right;
    will-change: transform;
  }

  .detail-cover-02 { top: 33vh; }
  .detail-cover-03 { top: 66vh; height: 34vh; }

  @keyframes coverOneIn {
    from { transform: scaleX(1); }
    to   { transform: scaleX(0); }
  }

  .detail-cover-01 { animation: coverOneIn 1000ms cubic-bezier(0.770, 0, 0.175, 1); animation-fill-mode: forwards; }
  .detail-cover-02 { animation: coverOneIn 1000ms cubic-bezier(0.770, 0, 0.175, 1); animation-fill-mode: forwards; animation-delay: 150ms; }
  .detail-cover-03 { animation: coverOneIn 1000ms cubic-bezier(0.770, 0, 0.175, 1); animation-fill-mode: forwards; animation-delay: 300ms; }

  .detail-cover-out {
    position: fixed;
    top: 0; left: 0;
    z-index: var(--zmax);
    width: 100vw; height: 100vh;
    background: #0b0b0b;
    transform: translateY(-99vh);
    transform-origin: top;
    transition: all 1000ms cubic-bezier(0.770, 0, 0.175, 1);
    will-change: transform;
  }

  .detail-cover-out-active { transform: translateY(0); }

  .detail-main {
    margin: 7.2rem auto 8rem auto;
    @include breakpoint(md) {
      margin: 17.6rem auto 9.6rem auto;
    }
  }

  .detail-figure, .eyebrow {
    margin-bottom: 1.6rem;
  }

  .genre {
    margin-bottom: 3.2rem;
  }

  .album {
    margin-bottom: 1rem;
    margin-left: -.4rem;
    @include breakpoint(md) { margin-bottom: .8rem; }
  }

  .artist {
    margin-top: -.4rem;
  }

  .figure-eyebrow { display: flex; }

  .figure-eyebrow-number { justify-self: end; }

  .detail-header {
    display: flex;
    flex-direction: column;
    @include breakpoint(md) { flex-direction: row; }
  }

  .detail-figure {
    @include breakpoint(md) {
      padding-right: 4rem;
      width: grid-width(6);
    }
  }

  .eyebrow {
    display: flex;
    justify-content: space-between;
  }

  .detail-details {
    display: flex;
    flex-direction: column;

    @include breakpoint(md) {
      width: grid-width(6);
      justify-content: center;
    }
  }

  .mini-player {
    margin: 6.4rem auto 4.8rem;
    @include breakpoint(md) { width: grid-width(9); }
    @include breakpoint(mdl) { width: grid-width(6); }
  }

  .detail-copy {
    @include breakpoint(md) {
      margin: 0 auto;
      width: grid-width(9);
    }
    @include breakpoint(mdl) { width: grid-width(6); }
  }

  p { text-align: justify; }
  p + p { text-indent: 2ch; }

</style>


<!-- logic -->
<script>
  import AppNav from '@/components/AppNav.vue';
  export default {
    transition: {
      name: 'detailFade',
      mode: 'out-in'
    },
    components: { AppNav },
    mounted() {
      const homeLink = document.querySelector('.home-link')
      const coverOut = document.querySelector('.detail-cover-out')

      homeLink.addEventListener('click', () => {
        coverOut.classList.add('detail-cover-out-active')
      })
    }
  }

</script>
